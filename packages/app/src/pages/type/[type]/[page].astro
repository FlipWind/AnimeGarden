---
import Layout from '../../../layouts/Layout.astro';
import ResourceTable from '../../../components/ResourceTable.astro';
import Pagination from '../../../components/Pagination.astro';

import { fetchResources } from '../../../fetch';

const { page: _page, type } = Astro.params;
const page = _page ? +_page : 1;
if (!type) {
  return Astro.redirect('/');
}

const QueryType: Record<string, string> = {
  动画: '動畫',
  季度全集: '季度全集',
  音乐: '音樂',
  动漫音乐: '動漫音樂',
  同人音乐: '同人音樂',
  流行音乐: '流行音樂',
  日剧: '日劇',
  RAW: 'ＲＡＷ',
  其他: '其他',
  漫画: '漫畫',
  港台原版: '港台原版',
  日文原版: '日文原版',
  游戏: '遊戲',
  电脑游戏: '電腦遊戲',
  主机游戏: '電視遊戲',
  掌机游戏: '掌機遊戲',
  '网络游戏 ': '網絡遊戲',
  游戏周边: '遊戲周邊',
  特摄: '特攝'
};

const resources = await fetchResources(page, { type: type in QueryType ? QueryType[type] : type });
---

<Layout title={`${type} 资源 | Anime Garden`}>
  <div class="mt-4vh">
    <ResourceTable resources={resources} />
    <Pagination page={page} prefix={`/type/${type}/`} />
  </div>
</Layout>
